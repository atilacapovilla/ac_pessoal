{% comment %} {% load static %} {% endcomment %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>PyPessoal - Anotação Report</title>
    <style>
        /* Corpo da página */
        body {
            font-family: Arial, sans-serif;
            font-size: 14px;
            margin: 0;
            padding: 0;
            background-color: #fff;
        }

        /* Configuração da página PDF */
        @page {
            size: A4;
            margin: 1cm; /* margem da página */
            @top-center {
                content: element(header);
            }
        }

        .page-break {
            break-before: page;
            page-break-before: always;
        }

        /* Header compacto */
        header {
            display: block;
            position: running(header);
            width: 100%;
            box-sizing: border-box;
            background-color: #fff;
        }

        .header-flex {
            display: flex;
            justify-content: space-between;
            width: 100%;
            padding: 10px 10px; /* compacto */
            border-bottom: 1.5px solid #b3b3d0; /* linha mais fina */
            box-sizing: border-box;
        }

        .header-col-title {
            flex: 7; /* 70% */
            text-align: center;
        }

        .header-title {
            font-weight: bold;
            font-size: 9pt; /* fonte menor para compactar */
            text-transform: uppercase;
            margin: 5px;
        }

        .header-col-info {
            flex: 3; /* 30% */
            text-align: center;
            font-size: 8pt;
            margin: 5px;
        }

        .page-counter::before {
            content: "Página " counter(page) " de " counter(pages);
        }

        /* Área principal do conteúdo */
        main.container {
             padding: 1cm 0;
        }

        /* Tabelas do conteúdo */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 5px;
        }

        th {
            width: 90px;
            border: 1px solid #ccc;
            padding: 8px;
            background-color: #f2f2f2;
            text-align: center;
        }

        td {
            width: 90px;
            border: 1px solid #ccc;
            padding: 8px;
            text-align: right;
        }

        td:first-child {
            width: 100px;
            text-align: left;
        }

        tr:last-child {
            font-weight: bold;
            background-color: #e0e0e0;
        }

        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .text-small { font-size: 8pt; }
        .fw-bold { font-weight: bold; }

    </style>
</head>
<body>
    <header>
        <div class="header-flex">
            <div class="header-col-title">
                <div class="header-title">Curso : {{ note.course }}</div>
                <div class="header-title">Anotação # {{note.order}} - {{ note.title }}</div>
                <div class="text-small">
                    {% if note.user.first_name %}
                        {{ note.user.first_name }} {{ note.user.last_name }},
                    {% else %}
                        {{ note.user }},
                    {% endif %}
                    em {{ note.created_at|date:"d F Y" }},
                    Ultima alteração {{ note.updated_at|date:"d F Y" }}
                </div>
            </div>
            <div class="header-col-info">
                <div class="header-title">Emissão em: {% now "d/m/Y" %}</div>
                <div class="header-title page-counter"></div>
            </div>
        </div>
    </header>

    <main class="container">
        {{ note.formatted_content|safe }}
    </main>
</body>
</html>
